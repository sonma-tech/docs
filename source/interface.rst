.. _interface:

开放接口
========

::

    https://api.sonma.net

.. _print:

打印
--------

接口地址
^^^^^^^^

.. http:post:: /v1/print

请求参数
^^^^^^^^

============ =============== ============================================================================
参数名称       是否必须          说明
============ =============== ============================================================================
content      是               打印内容
token        否               拥有打印权限的token,使用token方式鉴权时,请求头中无需Authorization
sn           否               打印机设备编号,使用Authorization鉴权时必传,指定打印机进行打印
template     否               模板编号,未传时会使用默认模板,默认模板优先级:打印机模板>打印机公用模板>透传模板
============ =============== ============================================================================

.. note::

    支持 :ref:`Authorization <sign>` 和 :ref:`Token <token>` 两种鉴权方式,根据不同的应用场景进行选择


返回示例
^^^^^^^^


.. _token:

获取Token
------------

获取指定打印机的 Token (鉴权令牌)

接口地址
^^^^^^^^

.. http:get:: /v1/auth/access_token


请求参数
^^^^^^^^

============ =============== ==========================================================
参数名称       是否必须          说明
============ =============== ==========================================================
printer_sn   是               打印机唯一编号
state        否               表示客户端的当前状态，可以指定任意值，认证服务器会原封不动地返回这个值
scopes       否               表示申请的权限范围,默认为 ``print`` , 可以使用该打印机的打印服务
============ =============== ==========================================================

返回示例
^^^^^^^^

删除Token
------------

接口地址
^^^^^^^^

.. http:delete:: /v1/auth/access_token/{token}


请求参数
^^^^^^^^

* 无


返回示例
^^^^^^^^





.. _returncode:

返回码说明
-----------

=========== ================================================
返回码       说明
=========== ================================================
0           调用成功
10404       请求所希望得到的资源未被在服务器上发现
10401       鉴权错误
10000       未定义错误
10400       请求参数错误
=========== ================================================